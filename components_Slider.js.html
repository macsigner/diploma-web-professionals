<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Slider.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Slider.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Template from './Template.js';
import * as Tools from '../tools.js';

/**
 * Slider.
 */
class Slider {
    /**
     * Construct.
     * @param el
     * @param options
     */
    constructor(el, options = {}) {
        this.el = el;

        this._defaultSettings = {
            addArrows: true,
            prevArrowContent: `&lt;span class="slider__prev-icon slider__arrow-icon">&lt;/span>
                                   &lt;span class="invisible">vorheriger Slide&lt;/span>`,
            nextArrowContent: `&lt;span class="invisible">nÃ¤chster Slide&lt;/span>
                                   &lt;span class="slider__next-icon slider__arrow-icon">&lt;/span>`,
            addPreview: true,
        };
        this._customSettings = options;
        this._settings = Tools.mapOptions(this._defaultSettings, this._customSettings);

        this.el.classList.add('slider__slides');
        this.slides = Array.from(el.children);

        this._sliderInner = document.createElement('div');
        this._sliderInner.classList.add('slider__inner');

        this._sliderWrapper = document.createElement('div');
        this._sliderWrapper.classList.add('slider');
        this._sliderWrapper.appendChild(this._sliderInner);

        this.el.parentNode.insertBefore(this._sliderWrapper, this.el);
        this._sliderInner.appendChild(this.el);

        this.slides.forEach((el) => {
            el.classList.add('slider__item');
        });

        if (this._settings.addArrows) {
            this._appendArrows();
        }

        if (this._settings.addPreview) {
            this._appendPreviews();

            this._sliderWrapper.addEventListener(
                'click',
                Tools.delegate('.slider__preview-item', (e) => this._previewClickListener(e))
            );
        }

        this.goToSlide(0);
    }

    /**
     * Go to specified slide.
     * @param index
     */
    goToSlide(index) {
        this.index = index;

        this.slides.forEach((slide, i) => {
            // eslint-disable-next-line no-unused-expressions
            i === index ? slide.classList.add('current') : slide.classList.remove('current');
        });

        this.el.dispatchEvent(new Event('afterGoTo'));
    }

    /**
     * Go to previous slide.
     */
    prev() {
        this.goToSlide(Math.max(0, this.index - 1));
    }

    /**
     * Go to next slide.
     */
    next() {
        this.goToSlide(Math.min(this.slides.length - 1, this.index + 1));
    }

    /**
     * Append arrows to current slider.
     * @private
     */
    _appendArrows() {
        this.prevArrow = document.createElement('button');
        this.prevArrow.innerHTML = this._settings.prevArrowContent;
        this.prevArrow.addEventListener('click', () => this.prev());
        this.prevArrow.classList.add('slider__prev', 'slider__arrow');

        this.nextArrow = document.createElement('button');
        this.nextArrow.innerHTML = this._settings.nextArrowContent;
        this.nextArrow.addEventListener('click', () => this.next());
        this.nextArrow.classList.add('slider__next', 'slider__arrow');

        this._sliderInner.appendChild(this.prevArrow);
        this._sliderInner.appendChild(this.nextArrow);

        this.el.addEventListener('afterGoTo', () => this._updateArrows());
    }

    /**
     * Update arrows visibility.
     * @private
     */
    _updateArrows() {
        switch (this.index) {
            case this.slides.length - 1:
                this.prevArrow.removeAttribute('disabled');
                this.nextArrow.disabled = true;
                break;
            case 0:
                this.prevArrow.disabled = true;
                this.nextArrow.removeAttribute('disabled');
                break;
            default:
                this.prevArrow.removeAttribute('disabled');
                this.nextArrow.removeAttribute('disabled');
        }
    }

    /**
     * Append and create preview images to current slider.
     * @private
     */
    _appendPreviews() {
        let previewContainer = document.createElement('ul');
        previewContainer.classList.add('slider__preview');

        this._sliderWrapper.appendChild(previewContainer);

        let htmlTemplate = document.createElement('template');
        htmlTemplate.dataset.templateName = 'preview';
        htmlTemplate.innerHTML = '&lt;li class="slider__preview-item" data-index>&lt;img data-template="image">&lt;/li>';
        let template = new Template(htmlTemplate);

        this.slides.forEach((el, i) => {
            let img = el.querySelector('img');

            let preview = template.create({
                image: {
                    title: img.alt ? img.alt : `Preview ${i}`,
                    'image_path': img.src,
                },
            });

            previewContainer.appendChild(preview);
        });

        this.previewImages = Array.from(previewContainer.children);
        this.previewImages.forEach((el, i) => el.dataset.index = i);

        this.el.addEventListener('afterGoTo', (e) => this._updatePreviews(e));
    }

    /**
     * Update preview image classes.
     * @private
     */
    _updatePreviews() {
        this.previewImages.forEach(el => {
            if (Number(el.dataset.index) === this.index) {
                el.classList.add('current');
            } else {
                el.classList.remove('current');
            }
        });
    }

    /**
     * Handle clicks on preview items.
     * @param e
     * @private
     */
    _previewClickListener(e) {
        let indexItem = e.target.closest('[data-index]');

        this.goToSlide(parseInt(indexItem.dataset.index));
    }
}

export default Slider;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Tools.html">Tools</a></li></ul><h3>Classes</h3><ul><li><a href="Base.html">Base</a></li><li><a href="CustomSelect.html">CustomSelect</a></li><li><a href="Filter.html">Filter</a></li><li><a href="FormSubmit.html">FormSubmit</a></li><li><a href="GoogleMap.html">GoogleMap</a></li><li><a href="MainNavigation.html">MainNavigation</a></li><li><a href="Modal.html">Modal</a></li><li><a href="RealEstateBase.html">RealEstateBase</a></li><li><a href="RealEstateDetail.html">RealEstateDetail</a></li><li><a href="RealEstateDetailPage.html">RealEstateDetailPage</a></li><li><a href="RealEstates.html">RealEstates</a></li><li><a href="Slider.html">Slider</a></li><li><a href="SmoothScroll.html">SmoothScroll</a></li><li><a href="Template.html">Template</a></li></ul><h3>Events</h3><ul><li><a href="RealEstates.html#event:realEstateDataLoaded">realEstateDataLoaded</a></li></ul><h3>Global</h3><ul><li><a href="global.html#setCustomProperties">setCustomProperties</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Thu Nov 24 2022 23:48:13 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
